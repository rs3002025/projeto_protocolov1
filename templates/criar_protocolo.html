{% extends "layout.html" %}

{% block content %}
<style>
    /* Basic styles for the form grid */
    .formulario {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 15px;
        background-color: #fff;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .form-group {
        display: flex;
        flex-direction: column;
    }
    .form-group.span-1 { grid-column: span 1; }
    .form-group.span-2 { grid-column: span 2; }
    .form-group.span-3 { grid-column: span 3; }
    .form-group.span-4 { grid-column: span 4; }
    .form-group.span-5 { grid-column: span 5; }
    .form-group.span-6 { grid-column: span 6; }
    .form-group.full-row { grid-column: 1 / -1; }

    .form-group label {
        margin-bottom: 5px;
        font-weight: bold;
        font-size: 0.9rem;
    }
    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1rem;
    }
    .form-actions {
        grid-column: 1 / -1;
        display: flex;
        justify-content: flex-start;
        gap: 10px;
        margin-top: 20px;
    }
</style>

<div class="container-fluid">
    <h3>Novo Protocolo</h3>
    <form class="formulario" method="POST" action="{{ url_for('criar_protocolo') }}" id="protocol-form">
        <!-- Fields from the old form -->
        <div class="form-group span-3">
            <label for="numeroProtocolo">Número do Protocolo</label>
            <input type="text" id="numeroProtocolo" name="numero" readonly class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="matricula">Matrícula</label>
            <input type="text" id="matricula" name="matricula" class="form-control">
        </div>
        <div class="form-group span-5">
            <label for="nome">Nome Completo</label>
            <input type="text" id="nome" name="nome" class="form-control">
        </div>
        <div class="form-group span-1" style="justify-content: flex-end; align-items: flex-end;">
            <button type="button" id="btnBuscarNome" class="btn btn-secondary" style="width: 100%; height: 38px;">Buscar</button>
        </div>
        <div class="form-group span-6">
            <label for="endereco">Endereço</label>
            <input type="text" id="endereco" name="endereco" class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="municipio">Município</label>
            <input type="text" id="municipio" name="municipio" value="Morada Nova" class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="bairro">Bairro</label>
            <select id="bairro" name="bairro" class="form-select">
                <option value="">Selecione um bairro</option>
            </select>
        </div>
        <div class="form-group span-3">
            <label for="cep">CEP</label>
            <input type="text" id="cep" name="cep" class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="telefone">Telefone</label>
            <input type="text" id="telefone" name="telefone" class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="cpf">CPF</label>
            <input type="text" id="cpf" name="cpf" class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="rg">RG</label>
            <input type="text" id="rg" name="rg" class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="dataExpedicao">Data de Expedição</label>
            <input type="date" id="dataExpedicao" name="data_expedicao" class="form-control">
        </div>
        <div class="form-group span-3">
            <label for="cargo">Cargo/Função</label>
            <input type="text" id="cargo" name="cargo" class="form-control">
        </div>
        <div class="form-group span-6">
            <label for="lotacao">Lotação</label>
            <select id="lotacao" name="lotacao" class="form-select">
                <option value="">Selecione...</option>
            </select>
        </div>
        <div class="form-group span-6">
            <label for="unidade">Unidade de Exercício</label>
            <input type="text" id="unidade" name="unidade_exercicio" class="form-control">
        </div>
        <div class="form-group span-6">
            <label for="tipo">Tipo de Requerimento</label>
            <select id="tipo" name="tipo_requerimento" class="form-select">
                <option value="">Selecione...</option>
            </select>
        </div>
        <div class="form-group span-6">
            <label for="requerAo">Requer ao</label>
            <select id="requerAo" name="requer_ao" class="form-select">
                <option value="">Selecione...</option>
                <option value="SECRETÁRIO">SECRETÁRIO</option>
                <option value="COORDENADOR DE RH">COORDENADOR DE RH</option>
                <option value="PREFEITA">PREFEITA</option>
            </select>
        </div>
        <div class="form-group span-3">
            <label for="dataSolicitacao">Data Solicitação</label>
            <input type="date" id="dataSolicitacao" name="data_solicitacao" class="form-control">
        </div>
        <div class="form-group full-row">
            <label for="complemento">Informações Complementares</label>
            <textarea id="complemento" name="observacoes" rows="8" class="form-control"></textarea>
        </div>

        <!-- Anexos section can be added later if needed -->
        <!--
        <div class="form-group full-row">
            <label for="anexos">Anexar Documentos (limite de 10MB por arquivo)</label>
            <input type="file" id="anexos" multiple onchange="previewFiles(this)" class="form-control">
            <div id="filePreviewContainer" class="file-preview"></div>
        </div>
        -->

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Enviar Requerimento</button>
            <button type="button" id="imprimirBtn" class="btn btn-success">Imprimir</button>
            <a href="{{ url_for('home') }}" class="btn btn-secondary">Voltar</a>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
{# We will add the specific javascript for this page here later #}
{% endblock %}

<!-- Modal Busca Servidor -->
<div class="modal fade" id="modalBuscaServidor" tabindex="-1" aria-labelledby="modalBuscaServidorLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalBuscaServidorLabel">Buscar Servidor por Nome</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="buscaNomeInput" class="form-label">Nome do Servidor</label>
          <input type="text" class="form-control" id="buscaNomeInput" placeholder="Digite para buscar...">
        </div>
        <div id="buscaNomeResultados" class="list-group">
          <!-- Search results will appear here -->
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>
