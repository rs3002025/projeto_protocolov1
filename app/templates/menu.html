{% extends "base.html" %}

{% block title %}Menu Principal - Sistema de Protocolo{% endblock %}

{% block content %}
<div id="menu" class="menu-screen content active">
    <a href="{{ url_for('main.dashboard') }}" class="menu-button" id="btnDashboard"><span class="icon">📈</span>Dashboard</a>
    <a href="{{ url_for('main.form') }}" class="menu-button" id="btnNovo"><span class="icon">📄</span>Novo Protocolo</a>
    <a href="{{ url_for('main.protocolos') }}" class="menu-button" id="btnTodosProtocolos"><span class="icon">🗂️</span>Todos os Protocolos</a>
    <a href="{{ url_for('main.relatorios') }}" class="menu-button" id="btnRelatorios"><span class="icon">📊</span>Relatórios</a>
    <a href="{{ url_for('main.meus_protocolos') }}" class="menu-button"><span class="icon">📂</span>Meus Protocolos</a>
    <a href="{{ url_for('main.config') }}" class="menu-button" id="btnConfig"><span class="icon">⚙️</span>Configurações</a>
    <a href="#" onclick="abrirModalAlterarSenha(); return false;" class="menu-button"><span class="icon">🔑</span>Alterar Senha</a>
    <a href="#" onclick="sair(); return false;" class="menu-button"><span class="icon">🚪</span>Sair</a>
</div>

<script>
    // Lógica de visibilidade dos botões, adaptada para o MPA
    document.addEventListener('DOMContentLoaded', () => {
        const nivelUsuario = localStorage.getItem('nivelUsuario') || "";

        const btnDashboard = document.getElementById('btnDashboard');
        const btnConfig = document.getElementById('btnConfig');
        const btnNovo = document.getElementById('btnNovo');
        const btnRelatorios = document.getElementById('btnRelatorios');
        const btnTodosProtocolos = document.getElementById('btnTodosProtocolos');

        // A classe .menu-button usa display: flex, que é o que precisamos.
        // Ocultamos os botões que não devem aparecer.
        if (btnDashboard && !(nivelUsuario === 'admin' || nivelUsuario === 'padrao')) btnDashboard.style.display = 'none';
        if (btnConfig && nivelUsuario !== 'admin') btnConfig.style.display = 'none';
        if (btnNovo && !['admin', 'padrao', 'usuario'].includes(nivelUsuario)) btnNovo.style.display = 'none';
        if (btnRelatorios && !(nivelUsuario === 'admin' || nivelUsuario === 'padrao')) btnRelatorios.style.display = 'none';
        if (btnTodosProtocolos && !(nivelUsuario === 'admin' || nivelUsuario === 'padrao')) btnTodosProtocolos.style.display = 'none';
    });
</script>
{% endblock %}
