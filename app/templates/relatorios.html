{% extends "base.html" %}

{% block title %}RelatÃ³rios - Sistema de Protocolo{% endblock %}

{% block content %}
<div id="relatorios" class="relatorios-screen content active">
    <form class="filtros" onsubmit="pesquisarProtocolos(); return false;">
        <input type="text" id="filtroNumero" placeholder="NÃºmero do Protocolo">
        <input type="text" id="filtroNome" placeholder="Nome do Requerente">
        <select id="filtroStatus">
        <option value="">Todos os Status</option>
        <option value="Em anÃ¡lise">Em anÃ¡lise</option>
        <option value="Pendente de documento">Pendente de documento</option>
        <option value="Finalizado">Finalizado</option>
        <option value="ConcluÃ­do">ConcluÃ­do</option>
        <option value="Encaminhado">Encaminhado</option>
        </select>
        <input type="date" id="filtroDataInicio" title="Data de InÃ­cio">
        <input type="date" id="filtroDataFim" title="Data Final">
        <select id="filtroTipo"><option value="">Todo tipo de Requerimento</option></select>
        <select id="filtroLotacao"><option value="">Todas as LotaÃ§Ãµes</option></select>
    </form>
    <div>
        <button onclick="pesquisarProtocolos()">Pesquisar</button>
       <button onclick="previsualizarRelatorioPDF()">ðŸ“„ PrÃ©-visualizar PDF</button>
        <button onclick="exportarRelatorioExcel()">ðŸ“Š Exportar para Excel</button>
        <button onclick="limparFiltrosRelatorio()">Limpar Filtros</button>
        <a href="{{ url_for('main.menu') }}" class="button-link">ðŸ”™ Voltar</a>
    </div>
    <table id="tabelaRelatorios">
        <thead>
        <tr>
            <th>NÃºmero</th><th>Requerente</th><th>MatrÃ­cula</th><th>Tipo</th><th>Data</th><th>Status</th><th>ResponsÃ¡vel</th>
        </tr>
        </thead>
        <tbody id="resultadosPesquisa"></tbody>
    </table>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        popularFiltrosRelatorio();
        pesquisarProtocolos();
    });
</script>
{% endblock %}
